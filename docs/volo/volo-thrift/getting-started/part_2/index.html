<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.85.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Part 2. Create a Thrift Server | CloudWeGo</title><meta name=description content="A leading practice for building enterprise cloud native middleware!"><meta property="og:title" content="Part 2. Create a Thrift Server"><meta property="og:description" content="Volo-Thrift is an RPC framework so that the bottom layer requires two major functions: Serialization and Transport.
IDL is short for Interface Definition Language.
Why IDL If we want to do RPC, we need to know what interface is for the server, what parameters to pass, and what the return value is, just like two people talking to each other, we need to make sure we are speaking the same language and doing the same thing."><meta property="og:type" content="article"><meta property="og:url" content="https://www.cloudwego.io/docs/volo/volo-thrift/getting-started/part_2/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-04-13T11:23:38+08:00"><meta property="og:site_name" content="CloudWeGo"><meta itemprop=name content="Part 2. Create a Thrift Server"><meta itemprop=description content="Volo-Thrift is an RPC framework so that the bottom layer requires two major functions: Serialization and Transport.
IDL is short for Interface Definition Language.
Why IDL If we want to do RPC, we need to know what interface is for the server, what parameters to pass, and what the return value is, just like two people talking to each other, we need to make sure we are speaking the same language and doing the same thing."><meta itemprop=dateModified content="2023-04-13T11:23:38+08:00"><meta itemprop=wordCount content="414"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Part 2. Create a Thrift Server"><meta name=twitter:description content="Volo-Thrift is an RPC framework so that the bottom layer requires two major functions: Serialization and Transport.
IDL is short for Interface Definition Language.
Why IDL If we want to do RPC, we need to know what interface is for the server, what parameters to pass, and what the return value is, just like two people talking to each other, we need to make sure we are speaking the same language and doing the same thing."><script async src="https://www.googletagmanager.com/gtag/js?id=G-QYWRQRLPRM"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-QYWRQRLPRM')</script><script>var _hmt=_hmt||[];(function(){var a=document.createElement("script"),b;a.src="https://hm.baidu.com/hm.js?f1808c42af827f368aa7eca3baae6d55",b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})()</script><link rel=preload href=/scss/main.min.8090891c264e3fa6623cbdac7ce42c1259703e8068886edd79eb5ec5f88cd0c9.css as=style><link href=/scss/main.min.8090891c264e3fa6623cbdac7ce42c1259703e8068886edd79eb5ec5f88cd0c9.css rel=stylesheet integrity><script src=https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><link rel=stylesheet href=/css/prism.css><link rel=stylesheet href=/css/docsearch.css><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','G-QYWRQRLPRM','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand-xl navbar-dark td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><img src=/img/logo.png></span></a>
<button class=navbar-toggler type=button data-toggle=collapse data-target=#main_navbar aria-controls=main_navbar aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button><div class="collapse navbar-collapse td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0 ml-auto"><li class="dropdown sub-menu"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Documentation</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/docs/kitex/>Kitex</a>
<a class=dropdown-item href=/docs/hertz/>Hertz</a>
<a class=dropdown-item href=/docs/volo/>Volo</a>
<a class=dropdown-item href=/docs/netpoll/>Netpoll</a>
<a class=dropdown-item href=/docs/cwgo/>Cwgo</a>
<a class=dropdown-item href=/docs/motore/>Motore</a>
<a class=dropdown-item href=/docs/pilota/>Pilota</a></div></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/about/><span>About</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/cooperation/><span>Cooperation</span></a></li><li class="dropdown sub-menu"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false><span>Security</span></a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/security/safety-bulletin/>safety-bulletin</a>
<a class=dropdown-item href=/security/vulnerability-reporting/>vulnerability-reporting</a></div></li><li class="nav-item dropdown mr-4"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/volo/volo-thrift/getting-started/part_2/>中文</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><div id=docsearch></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><div id=docsearch></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/volo/volo-thrift/getting-started/part_2/>中文</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Documentation</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsvolo-li><input type=checkbox id=m-docsvolo-check checked>
<label for=m-docsvolo-check><a href=/docs/volo/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolo><span>Volo</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolooverview-li><input type=checkbox id=m-docsvolooverview-check checked>
<label for=m-docsvolooverview-check><a href=/docs/volo/overview/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolooverview><span>Overview</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsvolovolo-thrift-li><input type=checkbox id=m-docsvolovolo-thrift-check checked>
<label for=m-docsvolovolo-thrift-check><a href=/docs/volo/volo-thrift/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolovolo-thrift><span>Volo-Thrift</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docsvolovolo-thriftgetting-started-li><input type=checkbox id=m-docsvolovolo-thriftgetting-started-check checked>
<label for=m-docsvolovolo-thriftgetting-started-check><a href=/docs/volo/volo-thrift/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolovolo-thriftgetting-started><span>Getting Started</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-thriftgetting-startedpart_1-li><input type=checkbox id=m-docsvolovolo-thriftgetting-startedpart_1-check>
<label for=m-docsvolovolo-thriftgetting-startedpart_1-check><a href=/docs/volo/volo-thrift/getting-started/part_1/ title="Part 1. Install the CLI Tool" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvolovolo-thriftgetting-startedpart_1><span>Install the CLI Tool</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-docsvolovolo-thriftgetting-startedpart_2-li><input type=checkbox id=m-docsvolovolo-thriftgetting-startedpart_2-check checked>
<label for=m-docsvolovolo-thriftgetting-startedpart_2-check><a href=/docs/volo/volo-thrift/getting-started/part_2/ title="Part 2. Create a Thrift Server" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-docsvolovolo-thriftgetting-startedpart_2><span class=td-sidebar-nav-active-item>Create a Thrift Server</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-thriftgetting-startedpart_3-li><input type=checkbox id=m-docsvolovolo-thriftgetting-startedpart_3-check>
<label for=m-docsvolovolo-thriftgetting-startedpart_3-check><a href=/docs/volo/volo-thrift/getting-started/part_3/ title="Part 3. Create a Client" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvolovolo-thriftgetting-startedpart_3><span>Create a Client</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-thriftgetting-startedpart_4-li><input type=checkbox id=m-docsvolovolo-thriftgetting-startedpart_4-check>
<label for=m-docsvolovolo-thriftgetting-startedpart_4-check><a href=/docs/volo/volo-thrift/getting-started/part_4/ title="Part 4. Add a Middleware" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvolovolo-thriftgetting-startedpart_4><span>Add a Middleware</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-thriftgetting-startedpart_5-li><input type=checkbox id=m-docsvolovolo-thriftgetting-startedpart_5-check>
<label for=m-docsvolovolo-thriftgetting-startedpart_5-check><a href=/docs/volo/volo-thrift/getting-started/part_5/ title="Part 5. What's Next?" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvolovolo-thriftgetting-startedpart_5><span>What's Next?</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsvolovolo-grpc-li><input type=checkbox id=m-docsvolovolo-grpc-check checked>
<label for=m-docsvolovolo-grpc-check><a href=/docs/volo/volo-grpc/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolovolo-grpc><span>Volo-gRPC</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsvolovolo-grpcgetting-started-li><input type=checkbox id=m-docsvolovolo-grpcgetting-started-check>
<label for=m-docsvolovolo-grpcgetting-started-check><a href=/docs/volo/volo-grpc/getting-started/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsvolovolo-grpcgetting-started><span>Getting Started</span></a></label><ul class="ul-4 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-grpcgetting-startedpart_1-li><input type=checkbox id=m-docsvolovolo-grpcgetting-startedpart_1-check>
<label for=m-docsvolovolo-grpcgetting-startedpart_1-check><a href=/docs/volo/volo-grpc/getting-started/part_1/ title="Part 1. Install the CLI Tool" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvolovolo-grpcgetting-startedpart_1><span>Install the CLI Tool</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-grpcgetting-startedpart_2-li><input type=checkbox id=m-docsvolovolo-grpcgetting-startedpart_2-check>
<label for=m-docsvolovolo-grpcgetting-startedpart_2-check><a href=/docs/volo/volo-grpc/getting-started/part_2/ title="Part 2. Create a gRPC Server" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvolovolo-grpcgetting-startedpart_2><span>Create a gRPC Server</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-grpcgetting-startedpart_3-li><input type=checkbox id=m-docsvolovolo-grpcgetting-startedpart_3-check>
<label for=m-docsvolovolo-grpcgetting-startedpart_3-check><a href=/docs/volo/volo-grpc/getting-started/part_3/ title="Part 3. Create a Client " class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvolovolo-grpcgetting-startedpart_3><span>Create a Client</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-grpcgetting-startedpart_4-li><input type=checkbox id=m-docsvolovolo-grpcgetting-startedpart_4-check>
<label for=m-docsvolovolo-grpcgetting-startedpart_4-check><a href=/docs/volo/volo-grpc/getting-started/part_4/ title="Part 4. Add a Middleware" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvolovolo-grpcgetting-startedpart_4><span>Add a Middleware</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsvolovolo-grpcgetting-startedpart_5-li><input type=checkbox id=m-docsvolovolo-grpcgetting-startedpart_5-check>
<label for=m-docsvolovolo-grpcgetting-startedpart_5-check><a href=/docs/volo/volo-grpc/getting-started/part_5/ title="Part 5. What's Next?" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-docsvolovolo-grpcgetting-startedpart_5><span>What's Next?</span></a></label></li></ul></li></ul></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/cloudwego/cloudwego.github.io/edit/main/content/en/docs/volo/volo-thrift/getting-started/part_2.md target=_blank><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/new/main/content/en/docs/volo/volo-thrift/getting-started/part_2.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i> Create child page</a>
<a href="https://github.com/cloudwego/cloudwego.github.io/issues/new?title=Part%202.%20Create%20a%20Thrift%20Server" target=_blank><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
<a href=https://github.com/cloudwego/kitex/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i> Create project issue</a></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/>Documentation</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/volo/>Volo</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/volo/volo-thrift/>Volo-Thrift</a></li><li class=breadcrumb-item><a href=https://www.cloudwego.io/docs/volo/volo-thrift/getting-started/>Getting Started</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://www.cloudwego.io/docs/volo/volo-thrift/getting-started/part_2/>Create a Thrift Server</a></li></ol></nav><div class=td-content><h1>Part 2. Create a Thrift Server</h1><header class=article-meta></header><p>Volo-Thrift is an RPC framework so that the bottom layer requires two major functions: Serialization and Transport.</p><p>IDL is short for <code>Interface Definition Language</code>.</p><h2 id=why-idl>Why IDL</h2><p>If we want to do RPC, we need to know what interface is for the server, what parameters to pass, and what the return value is,
just like two people talking to each other, we need to make sure we are speaking the same language and doing the same thing.</p><p>At this time, we need to use IDL to specify the protocol for both sides, just like when writing code, we need to know the function signature while calling a function.</p><p>Thrift IDL is a full-stack RPC solution for cross-language. You can see the syntax of Thrift IDL in <a href=https://diwakergupta.github.io/thrift-missing-guide/>thrift-missing-guide</a> or <a href=http://thrift.apache.org/docs/idl>Thrift interface description language</a>.</p><h2 id=write-idl>Write IDL</h2><p>To create a Thrift project, we need to write a Thrift IDL at first.</p><p>In your working directory, execute the following command:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ mkdir volo-example
$ <span style=color:#204a87>cd</span> volo-example
$ mkdir idl
$ vim idl/volo_example.thrift
</code></pre></div><p>Then, enter the following content:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-thrift data-lang=thrift><span style=color:#204a87;font-weight:700>namespace</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>rs</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>volo.example</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Item</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>required</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i64</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>id</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>2</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>required</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>title</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>3</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>required</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>content</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>10</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>optional</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>map</span><span style=color:#000;font-weight:700>&lt;</span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>string</span><span style=color:#000;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>extra</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>GetItemRequest</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>required</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>i64</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>id</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>struct</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>GetItemResponse</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>required</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>Item</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>item</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>service</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>ItemService</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000>GetItemResponse</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>GetItem</span> <span style=color:#ce5c00;font-weight:700>(</span><span style=color:#0000cf;font-weight:700>1</span><span style=color:#000;font-weight:700>:</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>GetItemRequest</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>req</span><span style=color:#000;font-weight:700>),</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><p>After saving and exiting, we execute the following command:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ volo init volo-example idl/volo_example.thrift
</code></pre></div><p><strong>Here we use the <code>init</code> command, followed by the name of our project, which means we need to generate template code. At the end, you need to specify an IDL used by the server.</strong></p><p>If you only need to add an IDL (such as the client IDL) without generating a template, do as follows:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ volo idl add idl/volo_example.thrift
</code></pre></div><p>| What&rsquo;s more, the volo tool also supports downloading IDL from git and then generating code, such as:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ volo idl add -g git@github.com:org/repo.git -r main /path/to/your/idl.thrift
</code></pre></div><p>| You may directly enter volo to see the detailed usage ~ next back to the topic ~</p><p>At this point, our entire directory structure looks like this:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>.
├── Cargo.toml
├── idl
│   └── volo_example.thrift
├── rust-toolchain.toml
├── src
│   ├── bin
│   │   └── server.rs
│   └── lib.rs
└── volo-gen
    ├── Cargo.toml
    ├── build.rs
    ├── src
    │   └── lib.rs
    └── volo.yml
</code></pre></div><p>Then we open <code>src/lib.rs</code> and add the method implementation to the <code>impl</code> block. The resulting code should look like this:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-rust data-lang=rust><span style=color:#8f5902;font-style:italic>#![feature(type_alias_impl_trait)]</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>pub</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>struct</span> <span style=color:#000>S</span><span style=color:#000;font-weight:700>;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#8f5902;font-style:italic>#[volo::async_trait]</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#204a87;font-weight:700>impl</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>volo_gen</span>::<span style=color:#000>volo</span>::<span style=color:#000>example</span>::<span style=color:#000>ItemService</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>for</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>S</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#8f5902;font-style:italic>// This is the part of the code we need to add
</span><span style=color:#8f5902;font-style:italic></span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#204a87;font-weight:700>async</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#204a87;font-weight:700>fn</span> <span style=color:#000>get_item</span><span style=color:#000;font-weight:700>(</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#ce5c00;font-weight:700>&amp;</span><span style=color:#3465a4>self</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#000>_req</span>: <span style=color:#000>volo_gen</span>::<span style=color:#000>volo</span>::<span style=color:#000>example</span>::<span style=color:#000>GetItemRequest</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>)</span><span style=color:#f8f8f8;text-decoration:underline> </span>-&gt; <span style=color:#000>core</span>::<span style=color:#000>result</span>::<span style=color:#204a87>Result</span><span style=color:#ce5c00;font-weight:700>&lt;</span><span style=color:#000>volo_gen</span>::<span style=color:#000>volo</span>::<span style=color:#000>example</span>::<span style=color:#000>GetItemResponse</span><span style=color:#000;font-weight:700>,</span><span style=color:#f8f8f8;text-decoration:underline> </span><span style=color:#000>volo_thrift</span>::<span style=color:#000>AnyhowError</span><span style=color:#ce5c00;font-weight:700>&gt;</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>{</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>        </span><span style=color:#204a87>Ok</span><span style=color:#000;font-weight:700>(</span><span style=color:#204a87>Default</span>::<span style=color:#000>default</span><span style=color:#000;font-weight:700>())</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline>    </span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span><span style=color:#f8f8f8;text-decoration:underline></span><span style=color:#000;font-weight:700>}</span><span style=color:#f8f8f8;text-decoration:underline>
</span></code></pre></div><p>Then execute:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ cargo update
$ cargo build
</code></pre></div><p>At this point, You will find <code>volo_gen.rs</code> file under <a href=https://doc.rust-lang.org/cargo/reference/environment-variables.html#environment-variables-cargo-sets-for-build-scripts>OUT_DIR Directory</a>.</p><p>Then execute the following command to get our server running:</p><div class=highlight><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ cargo run --bin server
</code></pre></div><p>At this point, we have our server running!</p><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no"><a href=https://github.com/cloudwego/cloudwego.github.io/issues/new>Please tell us how we can improve</a>.</p></div><script>const yesButton=document.querySelector('.feedback--answer-yes'),noButton=document.querySelector('.feedback--answer-no'),yesResponse=document.querySelector('.feedback--response-yes'),noResponse=document.querySelector('.feedback--response-no'),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=b=>{if(typeof ga!='function')return;const a={command:'send',hitType:'event',category:'Helpful',action:'click',label:window.location.pathname,value:b};ga(a.command,a.hitType,a.category,a.action,a.label,a.value)};yesButton.addEventListener('click',()=>{yesResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(1)}),noButton.addEventListener('click',()=>{noResponse.classList.add('feedback--response__visible'),disableButtons(),sendFeedback(0)})</script><br><div class="text-muted mt-5 pt-3 border-top">Last modified
April 13, 2023
: <a href=https://github.com/cloudwego/cloudwego.github.io/commit/a544e378411d253b2ed95a2c66f2a4eb0e0e5097>chore: fix link error (#603) (a544e37)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Lark aria-label=Lark><a class=text-white target=_blank rel=noopener href="https://applink.feishu.cn/client/chat/chatter/add_by_link?link_token=693v2544-2664-4421-b50f-7f1912p745r6" aria-label=Lark><img src=/webfonts/lark.svg alt style=width:26px;line-height:32.5px;margin-bottom:6px></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://twitter.com/CloudWeGo aria-label=Twitter><i class="fab fa-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/cloudwego aria-label=GitHub><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Slack aria-label=Slack><a class=text-white target=_blank rel=noopener href=https://join.slack.com/t/cloudwego/shared_invite/zt-tmcbzewn-UjXMF3ZQsPhl7W3tEDZboA aria-label=Slack><i class="fab fa-slack"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2023 The CloudWeGo Authors</small><p class="mt-2 text-white"><a class=cloudwego-link href=/about/ target=_blank rel=noopener>About</a>
|
<a class=cloudwego-link href=https://github.com/cloudwego/cloudwego.github.io/blob/main/LICENSE target=_blank rel=noopener>License</a></p></div></div></div></footer></div><script src=https://cdn.staticfile.org/popper.js/1.16.1/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script><script src=https://cdn.staticfile.org/bootstrap/4.6.0/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script><script src=/js/main.min.99d7cb67f0709dcc1d3641652a2142e6cb2272c12553893cdfffb8a69c5fda51.js integrity="sha256-mdfLZ/BwncwdNkFlKiFC5ssicsElU4k83/+4ppxf2lE=" crossorigin=anonymous></script><script src=/js/prism.js></script><script src=/js/docsearch.js></script><script type=text/javascript>let siteLang=window.location.pathname.startsWith('/zh/')?'zh':'en';docsearch({appId:'V7I042F992',apiKey:'8380a7ac88106841cb43fb000fa2edb4',indexName:'cloudwego',container:'#docsearch',searchParameters:{hitsPerPage:5,facetFilters:[`lang:${siteLang}`]}})</script><script src=/js/outbound-link.js></script><script src=/js/navScroll.js></script></body></html>